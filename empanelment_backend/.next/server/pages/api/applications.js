"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/applications";
exports.ids = ["pages/api/applications"];
exports.modules = {

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fapplications&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Capplications%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fapplications&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Capplications%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_applications_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\applications\\index.ts */ \"(api)/./pages/api/applications/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_applications_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_applications_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_applications_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_applications_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/applications\",\n        pathname: \"/api/applications\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_applications_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFwcGxpY2F0aW9ucyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXBwbGljYXRpb25zJTVDaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDaUU7QUFDakU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDZEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw2REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbXBhbmVsbWVudC1iYWNrZW5kLz83MzQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYXBwbGljYXRpb25zXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXBwbGljYXRpb25zXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXBwbGljYXRpb25zXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fapplications&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Capplications%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApplicationRepository: () => (/* binding */ ApplicationRepository),\n/* harmony export */   FileRepository: () => (/* binding */ FileRepository)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql2_promise__WEBPACK_IMPORTED_MODULE_0__);\n\nclass DatabaseConnection {\n    async getConnection() {\n        if (!this.connection) {\n            this.connection = await mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default().createConnection({\n                host: \"localhost\",\n                user: \"root\",\n                password: \"myroot\",\n                database: \"empanelment_db\",\n                port: parseInt(\"3306\" || 0)\n            });\n        }\n        return this.connection;\n    }\n    async closeConnection() {\n        if (this.connection) {\n            await this.connection.end();\n            this.connection = null;\n        }\n    }\n    constructor(){\n        this.connection = null;\n    }\n}\nclass ApplicationRepository {\n    async createApplication(data) {\n        const conn = await this.db.getConnection();\n        try {\n            const applicationId = this.generateApplicationId();\n            const [result] = await conn.execute(`INSERT INTO applications \r\n         (application_id, department, item_category, item_name, item_description, \r\n          technical_specs, compliance_requirements, estimated_value, delivery_timeline, \r\n          previous_experience, certifications, status, is_draft, submitted_at) \r\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n                applicationId,\n                data.department,\n                data.item_category,\n                data.item_name,\n                data.item_description,\n                data.technical_specs,\n                data.compliance_requirements,\n                data.estimated_value || null,\n                data.delivery_timeline || null,\n                data.previous_experience || null,\n                data.certifications || null,\n                data.is_draft ? \"draft\" : \"submitted\",\n                data.is_draft || false,\n                data.is_draft ? null : new Date()\n            ]);\n            // Log the action\n            await this.logApplicationHistory(applicationId, \"created\", null, data.is_draft ? \"draft\" : \"submitted\");\n            return await this.getApplicationById(applicationId);\n        } catch (error) {\n            throw new Error(`Failed to create application: ${error}`);\n        }\n    }\n    async getApplicationById(applicationId) {\n        const conn = await this.db.getConnection();\n        try {\n            const [rows] = await conn.execute(\"SELECT * FROM applications WHERE application_id = ?\", [\n                applicationId\n            ]);\n            const applications = rows;\n            if (applications.length === 0) {\n                throw new Error(\"Application not found\");\n            }\n            return applications[0];\n        } catch (error) {\n            throw new Error(`Failed to get application: ${error}`);\n        }\n    }\n    async updateApplication(applicationId, data) {\n        const conn = await this.db.getConnection();\n        try {\n            const currentApp = await this.getApplicationById(applicationId);\n            const fields = [];\n            const values = [];\n            Object.entries(data).forEach(([key, value])=>{\n                if (value !== undefined && key !== \"id\" && key !== \"application_id\") {\n                    fields.push(`${key} = ?`);\n                    values.push(value);\n                }\n            });\n            if (fields.length === 0) {\n                throw new Error(\"No fields to update\");\n            }\n            values.push(applicationId);\n            await conn.execute(`UPDATE applications SET ${fields.join(\", \")}, updated_at = CURRENT_TIMESTAMP WHERE application_id = ?`, values);\n            // Log the action\n            await this.logApplicationHistory(applicationId, \"updated\", currentApp.status, data.status || currentApp.status);\n            return await this.getApplicationById(applicationId);\n        } catch (error) {\n            throw new Error(`Failed to update application: ${error}`);\n        }\n    }\n    async getApplications(filters = {}) {\n        const conn = await this.db.getConnection();\n        try {\n            const { department, status, page = 1, limit = 10 } = filters;\n            const offset = (page - 1) * limit;\n            let whereClause = \"\";\n            const params = [];\n            if (department || status) {\n                const conditions = [];\n                if (department) {\n                    conditions.push(\"department = ?\");\n                    params.push(department);\n                }\n                if (status) {\n                    conditions.push(\"status = ?\");\n                    params.push(status);\n                }\n                whereClause = `WHERE ${conditions.join(\" AND \")}`;\n            }\n            // Get total count\n            const [countResult] = await conn.execute(`SELECT COUNT(*) as total FROM applications ${whereClause}`, params);\n            const total = countResult[0].total;\n            // Get applications\n            const [rows] = await conn.execute(`SELECT * FROM applications ${whereClause} ORDER BY created_at DESC LIMIT ? OFFSET ?`, [\n                ...params,\n                limit,\n                offset\n            ]);\n            return {\n                applications: rows,\n                total\n            };\n        } catch (error) {\n            throw new Error(`Failed to get applications: ${error}`);\n        }\n    }\n    async deleteApplication(applicationId) {\n        const conn = await this.db.getConnection();\n        try {\n            await conn.execute(\"DELETE FROM applications WHERE application_id = ?\", [\n                applicationId\n            ]);\n            await this.logApplicationHistory(applicationId, \"deleted\", \"draft\", \"deleted\");\n        } catch (error) {\n            throw new Error(`Failed to delete application: ${error}`);\n        }\n    }\n    generateApplicationId() {\n        return \"APP\" + Date.now().toString().slice(-6);\n    }\n    async logApplicationHistory(applicationId, action, oldStatus, newStatus, remarks) {\n        const conn = await this.db.getConnection();\n        try {\n            await conn.execute(\"INSERT INTO application_history (application_id, action, old_status, new_status, remarks) VALUES (?, ?, ?, ?, ?)\", [\n                applicationId,\n                action,\n                oldStatus,\n                newStatus,\n                remarks || null\n            ]);\n        } catch (error) {\n            console.error(\"Failed to log application history:\", error);\n        }\n    }\n    constructor(){\n        this.db = new DatabaseConnection();\n    }\n}\nclass FileRepository {\n    async saveFileInfo(fileData) {\n        const conn = await this.db.getConnection();\n        try {\n            const [result] = await conn.execute(`INSERT INTO application_files \r\n         (application_id, file_name, original_name, file_path, file_size, file_type) \r\n         VALUES (?, ?, ?, ?, ?, ?)`, [\n                fileData.application_id,\n                fileData.file_name,\n                fileData.original_name,\n                fileData.file_path,\n                fileData.file_size,\n                fileData.file_type\n            ]);\n            const insertId = result.insertId;\n            return await this.getFileById(insertId);\n        } catch (error) {\n            throw new Error(`Failed to save file info: ${error}`);\n        }\n    }\n    async getFileById(id) {\n        const conn = await this.db.getConnection();\n        try {\n            const [rows] = await conn.execute(\"SELECT * FROM application_files WHERE id = ?\", [\n                id\n            ]);\n            const files = rows;\n            if (files.length === 0) {\n                throw new Error(\"File not found\");\n            }\n            return files[0];\n        } catch (error) {\n            throw new Error(`Failed to get file: ${error}`);\n        }\n    }\n    async getFilesByApplicationId(applicationId) {\n        const conn = await this.db.getConnection();\n        try {\n            const [rows] = await conn.execute(\"SELECT * FROM application_files WHERE application_id = ? ORDER BY upload_date DESC\", [\n                applicationId\n            ]);\n            return rows;\n        } catch (error) {\n            throw new Error(`Failed to get files: ${error}`);\n        }\n    }\n    async deleteFile(id) {\n        const conn = await this.db.getConnection();\n        try {\n            await conn.execute(\"DELETE FROM application_files WHERE id = ?\", [\n                id\n            ]);\n        } catch (error) {\n            throw new Error(`Failed to delete file: ${error}`);\n        }\n    }\n    constructor(){\n        this.db = new DatabaseConnection();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDRixNQUFNLENBQUMyQyxLQUFLLEdBQUcsTUFBTXRCLEtBQUtLLE9BQU8sQ0FBQyxnREFBZ0Q7Z0JBQUMrRDthQUFHO1lBQ3RGLE1BQU1DLFFBQVEvQztZQUVkLElBQUkrQyxNQUFNN0MsTUFBTSxLQUFLLEdBQUc7Z0JBQ3RCLE1BQU0sSUFBSUgsTUFBTTtZQUNsQjtZQUVBLE9BQU9nRCxLQUFLLENBQUMsRUFBRTtRQUNqQixFQUFFLE9BQU9qRCxPQUFPO1lBQ2QsTUFBTSxJQUFJQyxNQUFNLENBQUMsb0JBQW9CLEVBQUVELE1BQU0sQ0FBQztRQUNoRDtJQUNGO0lBRUEsTUFBTWtELHdCQUF3QnBFLGFBQXFCLEVBQXVCO1FBQ3hFLE1BQU1GLE9BQU8sTUFBTSxJQUFJLENBQUNDLEVBQUUsQ0FBQ3RCLGFBQWE7UUFFeEMsSUFBSTtZQUNGLE1BQU0sQ0FBQzJDLEtBQUssR0FBRyxNQUFNdEIsS0FBS0ssT0FBTyxDQUMvQixzRkFDQTtnQkFBQ0g7YUFBYztZQUdqQixPQUFPb0I7UUFDVCxFQUFFLE9BQU9GLE9BQU87WUFDZCxNQUFNLElBQUlDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRUQsTUFBTSxDQUFDO1FBQ2pEO0lBQ0Y7SUFFQSxNQUFNbUQsV0FBV0gsRUFBVSxFQUFpQjtRQUMxQyxNQUFNcEUsT0FBTyxNQUFNLElBQUksQ0FBQ0MsRUFBRSxDQUFDdEIsYUFBYTtRQUV4QyxJQUFJO1lBQ0YsTUFBTXFCLEtBQUtLLE9BQU8sQ0FBQyw4Q0FBOEM7Z0JBQUMrRDthQUFHO1FBQ3ZFLEVBQUUsT0FBT2hELE9BQU87WUFDZCxNQUFNLElBQUlDLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRUQsTUFBTSxDQUFDO1FBQ25EO0lBQ0Y7O2FBbkVRbkIsS0FBSyxJQUFJdkI7O0FBb0VuQiIsInNvdXJjZXMiOlsid2VicGFjazovL2VtcGFuZWxtZW50LWJhY2tlbmQvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXlzcWwgZnJvbSAnbXlzcWwyL3Byb21pc2UnO1xyXG5pbXBvcnQgeyBBcHBsaWNhdGlvbkRhdGEsIEZpbGVEYXRhIH0gZnJvbSAnLi4vdHlwZXMvYXBwbGljYXRpb24nO1xyXG5cclxuY2xhc3MgRGF0YWJhc2VDb25uZWN0aW9uIHtcclxuICBwcml2YXRlIGNvbm5lY3Rpb246IG15c3FsLkNvbm5lY3Rpb24gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgYXN5bmMgZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPG15c3FsLkNvbm5lY3Rpb24+IHtcclxuICAgIGlmICghdGhpcy5jb25uZWN0aW9uKSB7XHJcbiAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGF3YWl0IG15c3FsLmNyZWF0ZUNvbm5lY3Rpb24oe1xyXG4gICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QsXHJcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUixcclxuICAgICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXHJcbiAgICAgICAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUsXHJcbiAgICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnMzMwNicpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb247XHJcbiAgfVxyXG5cclxuICBhc3luYyBjbG9zZUNvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5lbmQoKTtcclxuICAgICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBcHBsaWNhdGlvblJlcG9zaXRvcnkge1xyXG4gIHByaXZhdGUgZGIgPSBuZXcgRGF0YWJhc2VDb25uZWN0aW9uKCk7XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUFwcGxpY2F0aW9uKGRhdGE6IEFwcGxpY2F0aW9uRGF0YSk6IFByb21pc2U8QXBwbGljYXRpb25EYXRhPiB7XHJcbiAgICBjb25zdCBjb25uID0gYXdhaXQgdGhpcy5kYi5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGFwcGxpY2F0aW9uSWQgPSB0aGlzLmdlbmVyYXRlQXBwbGljYXRpb25JZCgpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBjb25uLmV4ZWN1dGUoXHJcbiAgICAgICAgYElOU0VSVCBJTlRPIGFwcGxpY2F0aW9ucyBcclxuICAgICAgICAgKGFwcGxpY2F0aW9uX2lkLCBkZXBhcnRtZW50LCBpdGVtX2NhdGVnb3J5LCBpdGVtX25hbWUsIGl0ZW1fZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgdGVjaG5pY2FsX3NwZWNzLCBjb21wbGlhbmNlX3JlcXVpcmVtZW50cywgZXN0aW1hdGVkX3ZhbHVlLCBkZWxpdmVyeV90aW1lbGluZSwgXHJcbiAgICAgICAgICBwcmV2aW91c19leHBlcmllbmNlLCBjZXJ0aWZpY2F0aW9ucywgc3RhdHVzLCBpc19kcmFmdCwgc3VibWl0dGVkX2F0KSBcclxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgYXBwbGljYXRpb25JZCxcclxuICAgICAgICAgIGRhdGEuZGVwYXJ0bWVudCxcclxuICAgICAgICAgIGRhdGEuaXRlbV9jYXRlZ29yeSxcclxuICAgICAgICAgIGRhdGEuaXRlbV9uYW1lLFxyXG4gICAgICAgICAgZGF0YS5pdGVtX2Rlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgZGF0YS50ZWNobmljYWxfc3BlY3MsXHJcbiAgICAgICAgICBkYXRhLmNvbXBsaWFuY2VfcmVxdWlyZW1lbnRzLFxyXG4gICAgICAgICAgZGF0YS5lc3RpbWF0ZWRfdmFsdWUgfHwgbnVsbCxcclxuICAgICAgICAgIGRhdGEuZGVsaXZlcnlfdGltZWxpbmUgfHwgbnVsbCxcclxuICAgICAgICAgIGRhdGEucHJldmlvdXNfZXhwZXJpZW5jZSB8fCBudWxsLFxyXG4gICAgICAgICAgZGF0YS5jZXJ0aWZpY2F0aW9ucyB8fCBudWxsLFxyXG4gICAgICAgICAgZGF0YS5pc19kcmFmdCA/ICdkcmFmdCcgOiAnc3VibWl0dGVkJyxcclxuICAgICAgICAgIGRhdGEuaXNfZHJhZnQgfHwgZmFsc2UsXHJcbiAgICAgICAgICBkYXRhLmlzX2RyYWZ0ID8gbnVsbCA6IG5ldyBEYXRlKClcclxuICAgICAgICBdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBMb2cgdGhlIGFjdGlvblxyXG4gICAgICBhd2FpdCB0aGlzLmxvZ0FwcGxpY2F0aW9uSGlzdG9yeShhcHBsaWNhdGlvbklkLCAnY3JlYXRlZCcsIG51bGwsIGRhdGEuaXNfZHJhZnQgPyAnZHJhZnQnIDogJ3N1Ym1pdHRlZCcpO1xyXG5cclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0QXBwbGljYXRpb25CeUlkKGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGFwcGxpY2F0aW9uOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0QXBwbGljYXRpb25CeUlkKGFwcGxpY2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QXBwbGljYXRpb25EYXRhPiB7XHJcbiAgICBjb25zdCBjb25uID0gYXdhaXQgdGhpcy5kYi5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm4uZXhlY3V0ZShcclxuICAgICAgICAnU0VMRUNUICogRlJPTSBhcHBsaWNhdGlvbnMgV0hFUkUgYXBwbGljYXRpb25faWQgPSA/JyxcclxuICAgICAgICBbYXBwbGljYXRpb25JZF1cclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFwcGxpY2F0aW9ucyA9IHJvd3MgYXMgQXBwbGljYXRpb25EYXRhW107XHJcbiAgICAgIGlmIChhcHBsaWNhdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcHBsaWNhdGlvbiBub3QgZm91bmQnKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uc1swXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBhcHBsaWNhdGlvbjogJHtlcnJvcn1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uSWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxBcHBsaWNhdGlvbkRhdGE+KTogUHJvbWlzZTxBcHBsaWNhdGlvbkRhdGE+IHtcclxuICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmRiLmdldENvbm5lY3Rpb24oKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY3VycmVudEFwcCA9IGF3YWl0IHRoaXMuZ2V0QXBwbGljYXRpb25CeUlkKGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZmllbGRzID0gW107XHJcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xyXG4gICAgICBcclxuICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYga2V5ICE9PSAnaWQnICYmIGtleSAhPT0gJ2FwcGxpY2F0aW9uX2lkJykge1xyXG4gICAgICAgICAgZmllbGRzLnB1c2goYCR7a2V5fSA9ID9gKTtcclxuICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGZpZWxkcyB0byB1cGRhdGUnKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdmFsdWVzLnB1c2goYXBwbGljYXRpb25JZCk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBjb25uLmV4ZWN1dGUoXHJcbiAgICAgICAgYFVQREFURSBhcHBsaWNhdGlvbnMgU0VUICR7ZmllbGRzLmpvaW4oJywgJyl9LCB1cGRhdGVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAgV0hFUkUgYXBwbGljYXRpb25faWQgPSA/YCxcclxuICAgICAgICB2YWx1ZXNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIExvZyB0aGUgYWN0aW9uXHJcbiAgICAgIGF3YWl0IHRoaXMubG9nQXBwbGljYXRpb25IaXN0b3J5KGFwcGxpY2F0aW9uSWQsICd1cGRhdGVkJywgY3VycmVudEFwcC5zdGF0dXMsIGRhdGEuc3RhdHVzIHx8IGN1cnJlbnRBcHAuc3RhdHVzKTtcclxuXHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEFwcGxpY2F0aW9uQnlJZChhcHBsaWNhdGlvbklkKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBhcHBsaWNhdGlvbjogJHtlcnJvcn1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEFwcGxpY2F0aW9ucyhmaWx0ZXJzOiB7XHJcbiAgICBkZXBhcnRtZW50Pzogc3RyaW5nO1xyXG4gICAgc3RhdHVzPzogc3RyaW5nO1xyXG4gICAgcGFnZT86IG51bWJlcjtcclxuICAgIGxpbWl0PzogbnVtYmVyO1xyXG4gIH0gPSB7fSk6IFByb21pc2U8eyBhcHBsaWNhdGlvbnM6IEFwcGxpY2F0aW9uRGF0YVtdOyB0b3RhbDogbnVtYmVyIH0+IHtcclxuICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmRiLmdldENvbm5lY3Rpb24oKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkZXBhcnRtZW50LCBzdGF0dXMsIHBhZ2UgPSAxLCBsaW1pdCA9IDEwIH0gPSBmaWx0ZXJzO1xyXG4gICAgICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgd2hlcmVDbGF1c2UgPSAnJztcclxuICAgICAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtdO1xyXG4gICAgICBcclxuICAgICAgaWYgKGRlcGFydG1lbnQgfHwgc3RhdHVzKSB7XHJcbiAgICAgICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xyXG4gICAgICAgIGlmIChkZXBhcnRtZW50KSB7XHJcbiAgICAgICAgICBjb25kaXRpb25zLnB1c2goJ2RlcGFydG1lbnQgPSA/Jyk7XHJcbiAgICAgICAgICBwYXJhbXMucHVzaChkZXBhcnRtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgICAgY29uZGl0aW9ucy5wdXNoKCdzdGF0dXMgPSA/Jyk7XHJcbiAgICAgICAgICBwYXJhbXMucHVzaChzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGVyZUNsYXVzZSA9IGBXSEVSRSAke2NvbmRpdGlvbnMuam9pbignIEFORCAnKX1gO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgdG90YWwgY291bnRcclxuICAgICAgY29uc3QgW2NvdW50UmVzdWx0XSA9IGF3YWl0IGNvbm4uZXhlY3V0ZShcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gYXBwbGljYXRpb25zICR7d2hlcmVDbGF1c2V9YCxcclxuICAgICAgICBwYXJhbXNcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgdG90YWwgPSAoY291bnRSZXN1bHQgYXMgYW55W10pWzBdLnRvdGFsO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IGFwcGxpY2F0aW9uc1xyXG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uLmV4ZWN1dGUoXHJcbiAgICAgICAgYFNFTEVDVCAqIEZST00gYXBwbGljYXRpb25zICR7d2hlcmVDbGF1c2V9IE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCA/IE9GRlNFVCA/YCxcclxuICAgICAgICBbLi4ucGFyYW1zLCBsaW1pdCwgb2Zmc2V0XVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBsaWNhdGlvbnM6IHJvd3MgYXMgQXBwbGljYXRpb25EYXRhW10sXHJcbiAgICAgICAgdG90YWxcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBhcHBsaWNhdGlvbnM6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVBcHBsaWNhdGlvbihhcHBsaWNhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmRiLmdldENvbm5lY3Rpb24oKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgY29ubi5leGVjdXRlKCdERUxFVEUgRlJPTSBhcHBsaWNhdGlvbnMgV0hFUkUgYXBwbGljYXRpb25faWQgPSA/JywgW2FwcGxpY2F0aW9uSWRdKTtcclxuICAgICAgYXdhaXQgdGhpcy5sb2dBcHBsaWNhdGlvbkhpc3RvcnkoYXBwbGljYXRpb25JZCwgJ2RlbGV0ZWQnLCAnZHJhZnQnLCAnZGVsZXRlZCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIGFwcGxpY2F0aW9uOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZUFwcGxpY2F0aW9uSWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiAnQVBQJyArIERhdGUubm93KCkudG9TdHJpbmcoKS5zbGljZSgtNik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGxvZ0FwcGxpY2F0aW9uSGlzdG9yeShcclxuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcclxuICAgIGFjdGlvbjogc3RyaW5nLFxyXG4gICAgb2xkU3RhdHVzOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgbmV3U3RhdHVzOiBzdHJpbmcsXHJcbiAgICByZW1hcmtzPzogc3RyaW5nXHJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBjb25uID0gYXdhaXQgdGhpcy5kYi5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGNvbm4uZXhlY3V0ZShcclxuICAgICAgICAnSU5TRVJUIElOVE8gYXBwbGljYXRpb25faGlzdG9yeSAoYXBwbGljYXRpb25faWQsIGFjdGlvbiwgb2xkX3N0YXR1cywgbmV3X3N0YXR1cywgcmVtYXJrcykgVkFMVUVTICg/LCA/LCA/LCA/LCA/KScsXHJcbiAgICAgICAgW2FwcGxpY2F0aW9uSWQsIGFjdGlvbiwgb2xkU3RhdHVzLCBuZXdTdGF0dXMsIHJlbWFya3MgfHwgbnVsbF1cclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgYXBwbGljYXRpb24gaGlzdG9yeTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVJlcG9zaXRvcnkge1xyXG4gIHByaXZhdGUgZGIgPSBuZXcgRGF0YWJhc2VDb25uZWN0aW9uKCk7XHJcblxyXG4gIGFzeW5jIHNhdmVGaWxlSW5mbyhmaWxlRGF0YTogRmlsZURhdGEpOiBQcm9taXNlPEZpbGVEYXRhPiB7XHJcbiAgICBjb25zdCBjb25uID0gYXdhaXQgdGhpcy5kYi5nZXRDb25uZWN0aW9uKCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubi5leGVjdXRlKFxyXG4gICAgICAgIGBJTlNFUlQgSU5UTyBhcHBsaWNhdGlvbl9maWxlcyBcclxuICAgICAgICAgKGFwcGxpY2F0aW9uX2lkLCBmaWxlX25hbWUsIG9yaWdpbmFsX25hbWUsIGZpbGVfcGF0aCwgZmlsZV9zaXplLCBmaWxlX3R5cGUpIFxyXG4gICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8pYCxcclxuICAgICAgICBbXHJcbiAgICAgICAgICBmaWxlRGF0YS5hcHBsaWNhdGlvbl9pZCxcclxuICAgICAgICAgIGZpbGVEYXRhLmZpbGVfbmFtZSxcclxuICAgICAgICAgIGZpbGVEYXRhLm9yaWdpbmFsX25hbWUsXHJcbiAgICAgICAgICBmaWxlRGF0YS5maWxlX3BhdGgsXHJcbiAgICAgICAgICBmaWxlRGF0YS5maWxlX3NpemUsXHJcbiAgICAgICAgICBmaWxlRGF0YS5maWxlX3R5cGVcclxuICAgICAgICBdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RmlsZUJ5SWQoaW5zZXJ0SWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSBmaWxlIGluZm86ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRGaWxlQnlJZChpZDogbnVtYmVyKTogUHJvbWlzZTxGaWxlRGF0YT4ge1xyXG4gICAgY29uc3QgY29ubiA9IGF3YWl0IHRoaXMuZGIuZ2V0Q29ubmVjdGlvbigpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uLmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gYXBwbGljYXRpb25fZmlsZXMgV0hFUkUgaWQgPSA/JywgW2lkXSk7XHJcbiAgICAgIGNvbnN0IGZpbGVzID0gcm93cyBhcyBGaWxlRGF0YVtdO1xyXG4gICAgICBcclxuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZSBub3QgZm91bmQnKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIGZpbGVzWzBdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGZpbGU6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRGaWxlc0J5QXBwbGljYXRpb25JZChhcHBsaWNhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEZpbGVEYXRhW10+IHtcclxuICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmRiLmdldENvbm5lY3Rpb24oKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubi5leGVjdXRlKFxyXG4gICAgICAgICdTRUxFQ1QgKiBGUk9NIGFwcGxpY2F0aW9uX2ZpbGVzIFdIRVJFIGFwcGxpY2F0aW9uX2lkID0gPyBPUkRFUiBCWSB1cGxvYWRfZGF0ZSBERVNDJyxcclxuICAgICAgICBbYXBwbGljYXRpb25JZF1cclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiByb3dzIGFzIEZpbGVEYXRhW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgZmlsZXM6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVGaWxlKGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmRiLmdldENvbm5lY3Rpb24oKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgY29ubi5leGVjdXRlKCdERUxFVEUgRlJPTSBhcHBsaWNhdGlvbl9maWxlcyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBmaWxlOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJEYXRhYmFzZUNvbm5lY3Rpb24iLCJnZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUiIsInBhc3N3b3JkIiwiREJfUEFTU1dPUkQiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJwb3J0IiwicGFyc2VJbnQiLCJEQl9QT1JUIiwiY2xvc2VDb25uZWN0aW9uIiwiZW5kIiwiQXBwbGljYXRpb25SZXBvc2l0b3J5IiwiY3JlYXRlQXBwbGljYXRpb24iLCJkYXRhIiwiY29ubiIsImRiIiwiYXBwbGljYXRpb25JZCIsImdlbmVyYXRlQXBwbGljYXRpb25JZCIsInJlc3VsdCIsImV4ZWN1dGUiLCJkZXBhcnRtZW50IiwiaXRlbV9jYXRlZ29yeSIsIml0ZW1fbmFtZSIsIml0ZW1fZGVzY3JpcHRpb24iLCJ0ZWNobmljYWxfc3BlY3MiLCJjb21wbGlhbmNlX3JlcXVpcmVtZW50cyIsImVzdGltYXRlZF92YWx1ZSIsImRlbGl2ZXJ5X3RpbWVsaW5lIiwicHJldmlvdXNfZXhwZXJpZW5jZSIsImNlcnRpZmljYXRpb25zIiwiaXNfZHJhZnQiLCJEYXRlIiwibG9nQXBwbGljYXRpb25IaXN0b3J5IiwiZ2V0QXBwbGljYXRpb25CeUlkIiwiZXJyb3IiLCJFcnJvciIsInJvd3MiLCJhcHBsaWNhdGlvbnMiLCJsZW5ndGgiLCJ1cGRhdGVBcHBsaWNhdGlvbiIsImN1cnJlbnRBcHAiLCJmaWVsZHMiLCJ2YWx1ZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwidW5kZWZpbmVkIiwicHVzaCIsImpvaW4iLCJzdGF0dXMiLCJnZXRBcHBsaWNhdGlvbnMiLCJmaWx0ZXJzIiwicGFnZSIsImxpbWl0Iiwib2Zmc2V0Iiwid2hlcmVDbGF1c2UiLCJwYXJhbXMiLCJjb25kaXRpb25zIiwiY291bnRSZXN1bHQiLCJ0b3RhbCIsImRlbGV0ZUFwcGxpY2F0aW9uIiwibm93IiwidG9TdHJpbmciLCJzbGljZSIsImFjdGlvbiIsIm9sZFN0YXR1cyIsIm5ld1N0YXR1cyIsInJlbWFya3MiLCJjb25zb2xlIiwiRmlsZVJlcG9zaXRvcnkiLCJzYXZlRmlsZUluZm8iLCJmaWxlRGF0YSIsImFwcGxpY2F0aW9uX2lkIiwiZmlsZV9uYW1lIiwib3JpZ2luYWxfbmFtZSIsImZpbGVfcGF0aCIsImZpbGVfc2l6ZSIsImZpbGVfdHlwZSIsImluc2VydElkIiwiZ2V0RmlsZUJ5SWQiLCJpZCIsImZpbGVzIiwiZ2V0RmlsZXNCeUFwcGxpY2F0aW9uSWQiLCJkZWxldGVGaWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db.ts\n");

/***/ }),

/***/ "(api)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createErrorResponse: () => (/* binding */ createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* binding */ createSuccessResponse),\n/* harmony export */   handleApiError: () => (/* binding */ handleApiError),\n/* harmony export */   parseQuery: () => (/* binding */ parseQuery)\n/* harmony export */ });\nconst createSuccessResponse = (data, message, pagination)=>({\n        success: true,\n        data,\n        message,\n        pagination\n    });\nconst createErrorResponse = (error, message)=>({\n        success: false,\n        error,\n        message\n    });\nconst handleApiError = (error)=>{\n    console.error(\"API Error:\", error);\n    if (error.name === \"ZodError\") {\n        return createErrorResponse(\"Validation Error\", error.errors.map((e)=>`${e.path.join(\".\")}: ${e.message}`).join(\", \"));\n    }\n    return createErrorResponse(\"Internal Server Error\", error.message || \"An unexpected error occurred\");\n};\nconst parseQuery = (query)=>{\n    const parsed = {};\n    Object.entries(query).forEach(([key, value])=>{\n        if (typeof value === \"string\") {\n            // Try to parse numbers\n            if (!isNaN(Number(value))) {\n                parsed[key] = Number(value);\n            } else {\n                parsed[key] = value;\n            }\n        } else {\n            parsed[key] = value;\n        }\n    });\n    return parsed;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVPLE1BQU1BLHdCQUF3QixDQUNuQ0MsTUFDQUMsU0FDQUMsYUFDb0I7UUFDcEJDLFNBQVM7UUFDVEg7UUFDQUM7UUFDQUM7SUFDRixHQUFHO0FBRUksTUFBTUUsc0JBQXNCLENBQ2pDQyxPQUNBSixVQUNpQjtRQUNqQkUsU0FBUztRQUNURTtRQUNBSjtJQUNGLEdBQUc7QUFFSSxNQUFNSyxpQkFBaUIsQ0FBQ0Q7SUFDN0JFLFFBQVFGLEtBQUssQ0FBQyxjQUFjQTtJQUU1QixJQUFJQSxNQUFNRyxJQUFJLEtBQUssWUFBWTtRQUM3QixPQUFPSixvQkFDTCxvQkFDQUMsTUFBTUksTUFBTSxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsSUFBVyxDQUFDLEVBQUVBLEVBQUVDLElBQUksQ0FBQ0MsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFRixFQUFFVixPQUFPLENBQUMsQ0FBQyxFQUFFWSxJQUFJLENBQUM7SUFFM0U7SUFFQSxPQUFPVCxvQkFDTCx5QkFDQUMsTUFBTUosT0FBTyxJQUFJO0FBRXJCLEVBQUU7QUFFSyxNQUFNYSxhQUFhLENBQUNDO0lBQ3pCLE1BQU1DLFNBQWMsQ0FBQztJQUVyQkMsT0FBT0MsT0FBTyxDQUFDSCxPQUFPSSxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQ3pDLElBQUksT0FBT0EsVUFBVSxVQUFVO1lBQzdCLHVCQUF1QjtZQUN2QixJQUFJLENBQUNDLE1BQU1DLE9BQU9GLFNBQVM7Z0JBQ3pCTCxNQUFNLENBQUNJLElBQUksR0FBR0csT0FBT0Y7WUFDdkIsT0FBTztnQkFDTEwsTUFBTSxDQUFDSSxJQUFJLEdBQUdDO1lBQ2hCO1FBQ0YsT0FBTztZQUNMTCxNQUFNLENBQUNJLElBQUksR0FBR0M7UUFDaEI7SUFDRjtJQUVBLE9BQU9MO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2VtcGFuZWxtZW50LWJhY2tlbmQvLi9saWIvdXRpbHMudHM/Zjc0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcGlSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzL2FwcGxpY2F0aW9uJztcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTdWNjZXNzUmVzcG9uc2UgPSA8VD4oXHJcbiAgZGF0YTogVCxcclxuICBtZXNzYWdlPzogc3RyaW5nLFxyXG4gIHBhZ2luYXRpb24/OiBhbnlcclxuKTogQXBpUmVzcG9uc2U8VD4gPT4gKHtcclxuICBzdWNjZXNzOiB0cnVlLFxyXG4gIGRhdGEsXHJcbiAgbWVzc2FnZSxcclxuICBwYWdpbmF0aW9uLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVFcnJvclJlc3BvbnNlID0gKFxyXG4gIGVycm9yOiBzdHJpbmcsXHJcbiAgbWVzc2FnZT86IHN0cmluZ1xyXG4pOiBBcGlSZXNwb25zZSA9PiAoe1xyXG4gIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gIGVycm9yLFxyXG4gIG1lc3NhZ2UsXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhbmRsZUFwaUVycm9yID0gKGVycm9yOiBhbnkpOiBBcGlSZXNwb25zZSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKTtcclxuICBcclxuICBpZiAoZXJyb3IubmFtZSA9PT0gJ1pvZEVycm9yJykge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoXHJcbiAgICAgICdWYWxpZGF0aW9uIEVycm9yJyxcclxuICAgICAgZXJyb3IuZXJyb3JzLm1hcCgoZTogYW55KSA9PiBgJHtlLnBhdGguam9pbignLicpfTogJHtlLm1lc3NhZ2V9YCkuam9pbignLCAnKVxyXG4gICAgKTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoXHJcbiAgICAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcclxuICAgIGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnXHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXJzZVF1ZXJ5ID0gKHF1ZXJ5OiBhbnkpID0+IHtcclxuICBjb25zdCBwYXJzZWQ6IGFueSA9IHt9O1xyXG4gIFxyXG4gIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIC8vIFRyeSB0byBwYXJzZSBudW1iZXJzXHJcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHZhbHVlKSkpIHtcclxuICAgICAgICBwYXJzZWRba2V5XSA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFyc2VkW2tleV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGFyc2VkW2tleV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICByZXR1cm4gcGFyc2VkO1xyXG59OyJdLCJuYW1lcyI6WyJjcmVhdGVTdWNjZXNzUmVzcG9uc2UiLCJkYXRhIiwibWVzc2FnZSIsInBhZ2luYXRpb24iLCJzdWNjZXNzIiwiY3JlYXRlRXJyb3JSZXNwb25zZSIsImVycm9yIiwiaGFuZGxlQXBpRXJyb3IiLCJjb25zb2xlIiwibmFtZSIsImVycm9ycyIsIm1hcCIsImUiLCJwYXRoIiwiam9pbiIsInBhcnNlUXVlcnkiLCJxdWVyeSIsInBhcnNlZCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJpc05hTiIsIk51bWJlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils.ts\n");

/***/ }),

/***/ "(api)/./lib/validation.ts":
/*!***************************!*\
  !*** ./lib/validation.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applicationSchema: () => (/* binding */ applicationSchema),\n/* harmony export */   fileUploadSchema: () => (/* binding */ fileUploadSchema),\n/* harmony export */   paginationSchema: () => (/* binding */ paginationSchema),\n/* harmony export */   updateApplicationSchema: () => (/* binding */ updateApplicationSchema),\n/* harmony export */   validateApplication: () => (/* binding */ validateApplication),\n/* harmony export */   validateFileUpload: () => (/* binding */ validateFileUpload),\n/* harmony export */   validatePagination: () => (/* binding */ validatePagination),\n/* harmony export */   validateUpdateApplication: () => (/* binding */ validateUpdateApplication)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// lib/validation.ts\n\nconst applicationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    department: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_category: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    technical_specs: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    compliance_requirements: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    estimated_value: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    delivery_timeline: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    previous_experience: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    certifications: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"draft\",\n        \"submitted\",\n        \"under_review\",\n        \"approved\",\n        \"rejected\"\n    ]).optional(),\n    is_draft: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n    created_at: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    updated_at: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    submitted_at: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nconst updateApplicationSchema = applicationSchema.partial();\nconst paginationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    page: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).default(1),\n    limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).max(100).default(10)\n});\nconst fileUploadSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    application_id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, \"Application ID is required\")\n});\nconst validateApplication = (data)=>{\n    return applicationSchema.parse(data);\n};\nconst validateUpdateApplication = (data)=>{\n    return updateApplicationSchema.parse(data);\n};\nconst validatePagination = (data)=>{\n    return paginationSchema.parse(data);\n};\nconst validateFileUpload = (data)=>{\n    return fileUploadSchema.parse(data);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdmFsaWRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxvQkFBb0I7QUFDSTtBQUVqQixNQUFNQyxvQkFBb0JELGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDeENDLFlBQVlILGtDQUFDQSxDQUFDSSxNQUFNO0lBQ3BCQyxlQUFlTCxrQ0FBQ0EsQ0FBQ0ksTUFBTTtJQUN2QkUsV0FBV04sa0NBQUNBLENBQUNJLE1BQU07SUFDbkJHLGtCQUFrQlAsa0NBQUNBLENBQUNJLE1BQU07SUFDMUJJLGlCQUFpQlIsa0NBQUNBLENBQUNJLE1BQU07SUFDekJLLHlCQUF5QlQsa0NBQUNBLENBQUNJLE1BQU07SUFDakNNLGlCQUFpQlYsa0NBQUNBLENBQUNJLE1BQU0sR0FBR08sUUFBUTtJQUNwQ0MsbUJBQW1CWixrQ0FBQ0EsQ0FBQ0ksTUFBTSxHQUFHTyxRQUFRO0lBQ3RDRSxxQkFBcUJiLGtDQUFDQSxDQUFDSSxNQUFNLEdBQUdPLFFBQVE7SUFDeENHLGdCQUFnQmQsa0NBQUNBLENBQUNJLE1BQU0sR0FBR08sUUFBUTtJQUNuQ0ksUUFBUWYsa0NBQUNBLENBQUNnQixJQUFJLENBQUM7UUFBQztRQUFTO1FBQWE7UUFBZ0I7UUFBWTtLQUFXLEVBQUVMLFFBQVE7SUFDdkZNLFVBQVVqQixrQ0FBQ0EsQ0FBQ2tCLE9BQU8sR0FBR1AsUUFBUTtJQUM5QlEsWUFBWW5CLGtDQUFDQSxDQUFDSSxNQUFNLEdBQUdPLFFBQVE7SUFDL0JTLFlBQVlwQixrQ0FBQ0EsQ0FBQ0ksTUFBTSxHQUFHTyxRQUFRO0lBQy9CVSxjQUFjckIsa0NBQUNBLENBQUNJLE1BQU0sR0FBR08sUUFBUTtBQUNuQyxHQUFHO0FBRUksTUFBTVcsMEJBQTBCckIsa0JBQWtCc0IsT0FBTyxHQUFHO0FBRTVELE1BQU1DLG1CQUFtQnhCLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDdkN1QixNQUFNekIsa0NBQUNBLENBQUMwQixNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHQyxPQUFPLENBQUM7SUFDaENDLE9BQU83QixrQ0FBQ0EsQ0FBQzBCLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUdHLEdBQUcsQ0FBQyxLQUFLRixPQUFPLENBQUM7QUFDNUMsR0FBRztBQUVJLE1BQU1HLG1CQUFtQi9CLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDdkM4QixnQkFBZ0JoQyxrQ0FBQ0EsQ0FBQ0ksTUFBTSxHQUFHdUIsR0FBRyxDQUFDLEdBQUc7QUFDcEMsR0FBRztBQUVJLE1BQU1NLHNCQUFzQixDQUFDQztJQUNsQyxPQUFPakMsa0JBQWtCa0MsS0FBSyxDQUFDRDtBQUNqQyxFQUFFO0FBRUssTUFBTUUsNEJBQTRCLENBQUNGO0lBQ3hDLE9BQU9aLHdCQUF3QmEsS0FBSyxDQUFDRDtBQUN2QyxFQUFFO0FBRUssTUFBTUcscUJBQXFCLENBQUNIO0lBQ2pDLE9BQU9WLGlCQUFpQlcsS0FBSyxDQUFDRDtBQUNoQyxFQUFFO0FBRUssTUFBTUkscUJBQXFCLENBQUNKO0lBQ2pDLE9BQU9ILGlCQUFpQkksS0FBSyxDQUFDRDtBQUNoQyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW1wYW5lbG1lbnQtYmFja2VuZC8uL2xpYi92YWxpZGF0aW9uLnRzPzUwYWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL3ZhbGlkYXRpb24udHNcclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcblxyXG5leHBvcnQgY29uc3QgYXBwbGljYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgZGVwYXJ0bWVudDogei5zdHJpbmcoKSxcclxuICBpdGVtX2NhdGVnb3J5OiB6LnN0cmluZygpLFxyXG4gIGl0ZW1fbmFtZTogei5zdHJpbmcoKSxcclxuICBpdGVtX2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLFxyXG4gIHRlY2huaWNhbF9zcGVjczogei5zdHJpbmcoKSxcclxuICBjb21wbGlhbmNlX3JlcXVpcmVtZW50czogei5zdHJpbmcoKSxcclxuICBlc3RpbWF0ZWRfdmFsdWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBkZWxpdmVyeV90aW1lbGluZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIHByZXZpb3VzX2V4cGVyaWVuY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBjZXJ0aWZpY2F0aW9uczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIHN0YXR1czogei5lbnVtKFsnZHJhZnQnLCAnc3VibWl0dGVkJywgJ3VuZGVyX3JldmlldycsICdhcHByb3ZlZCcsICdyZWplY3RlZCddKS5vcHRpb25hbCgpLFxyXG4gIGlzX2RyYWZ0OiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxyXG4gIGNyZWF0ZWRfYXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICB1cGRhdGVkX2F0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgc3VibWl0dGVkX2F0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUFwcGxpY2F0aW9uU2NoZW1hID0gYXBwbGljYXRpb25TY2hlbWEucGFydGlhbCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhZ2luYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgcGFnZTogei5udW1iZXIoKS5taW4oMSkuZGVmYXVsdCgxKSxcclxuICBsaW1pdDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCkuZGVmYXVsdCgxMCksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpbGVVcGxvYWRTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgYXBwbGljYXRpb25faWQ6IHouc3RyaW5nKCkubWluKDEsICdBcHBsaWNhdGlvbiBJRCBpcyByZXF1aXJlZCcpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUFwcGxpY2F0aW9uID0gKGRhdGE6IHVua25vd24pID0+IHtcclxuICByZXR1cm4gYXBwbGljYXRpb25TY2hlbWEucGFyc2UoZGF0YSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVVcGRhdGVBcHBsaWNhdGlvbiA9IChkYXRhOiB1bmtub3duKSA9PiB7XHJcbiAgcmV0dXJuIHVwZGF0ZUFwcGxpY2F0aW9uU2NoZW1hLnBhcnNlKGRhdGEpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlUGFnaW5hdGlvbiA9IChkYXRhOiB1bmtub3duKSA9PiB7XHJcbiAgcmV0dXJuIHBhZ2luYXRpb25TY2hlbWEucGFyc2UoZGF0YSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGaWxlVXBsb2FkID0gKGRhdGE6IHVua25vd24pID0+IHtcclxuICByZXR1cm4gZmlsZVVwbG9hZFNjaGVtYS5wYXJzZShkYXRhKTtcclxufTsiXSwibmFtZXMiOlsieiIsImFwcGxpY2F0aW9uU2NoZW1hIiwib2JqZWN0IiwiZGVwYXJ0bWVudCIsInN0cmluZyIsIml0ZW1fY2F0ZWdvcnkiLCJpdGVtX25hbWUiLCJpdGVtX2Rlc2NyaXB0aW9uIiwidGVjaG5pY2FsX3NwZWNzIiwiY29tcGxpYW5jZV9yZXF1aXJlbWVudHMiLCJlc3RpbWF0ZWRfdmFsdWUiLCJvcHRpb25hbCIsImRlbGl2ZXJ5X3RpbWVsaW5lIiwicHJldmlvdXNfZXhwZXJpZW5jZSIsImNlcnRpZmljYXRpb25zIiwic3RhdHVzIiwiZW51bSIsImlzX2RyYWZ0IiwiYm9vbGVhbiIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0Iiwic3VibWl0dGVkX2F0IiwidXBkYXRlQXBwbGljYXRpb25TY2hlbWEiLCJwYXJ0aWFsIiwicGFnaW5hdGlvblNjaGVtYSIsInBhZ2UiLCJudW1iZXIiLCJtaW4iLCJkZWZhdWx0IiwibGltaXQiLCJtYXgiLCJmaWxlVXBsb2FkU2NoZW1hIiwiYXBwbGljYXRpb25faWQiLCJ2YWxpZGF0ZUFwcGxpY2F0aW9uIiwiZGF0YSIsInBhcnNlIiwidmFsaWRhdGVVcGRhdGVBcHBsaWNhdGlvbiIsInZhbGlkYXRlUGFnaW5hdGlvbiIsInZhbGlkYXRlRmlsZVVwbG9hZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/validation.ts\n");

/***/ }),

/***/ "(api)/./pages/api/applications/index.ts":
/*!*****************************************!*\
  !*** ./pages/api/applications/index.ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db */ \"(api)/./lib/db.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/validation */ \"(api)/./lib/validation.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/utils */ \"(api)/./lib/utils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_validation__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_validation__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst applicationRepo = new _lib_db__WEBPACK_IMPORTED_MODULE_0__.ApplicationRepository();\nasync function handler(req, res) {\n    try {\n        if (req.method === \"GET\") {\n            const query = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.parseQuery)(req.query);\n            const { page, limit } = (0,_lib_validation__WEBPACK_IMPORTED_MODULE_1__.validatePagination)(query);\n            const filters = {\n                department: query.department,\n                status: query.status,\n                page,\n                limit\n            };\n            const { applications, total } = await applicationRepo.getApplications(filters);\n            const totalPages = Math.ceil(total / limit);\n            return res.status(200).json((0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.createSuccessResponse)(applications, \"Applications retrieved successfully\", {\n                page,\n                limit,\n                total,\n                totalPages\n            }));\n        }\n        if (req.method === \"POST\") {\n            console.log(\"Received request body:\", req.body); // Debug incoming body\n            const validatedData = (0,_lib_validation__WEBPACK_IMPORTED_MODULE_1__.validateApplication)(req.body);\n            console.log(\"Validated application:\", validatedData);\n            // Insert the validated application into DB\n            const created = await applicationRepo.createApplication(validatedData);\n            return res.status(201).json((0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.createSuccessResponse)(created, \"Application created successfully\"));\n        }\n        // Method not allowed\n        return res.status(405).json((0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.createErrorResponse)(\"Method not allowed\"));\n    } catch (error) {\n        console.error(\"Error in /api/applications:\", error);\n        return res.status(500).json((0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.handleApiError)(error));\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXBwbGljYXRpb25zL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDd0Q7QUFJdkI7QUFNTDtBQUU1QixNQUFNTyxrQkFBa0IsSUFBSVAsMERBQXFCQTtBQUVsQyxlQUFlUSxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJO1FBQ0YsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87WUFDeEIsTUFBTUMsUUFBUU4sc0RBQVVBLENBQUNHLElBQUlHLEtBQUs7WUFDbEMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHWixtRUFBa0JBLENBQUNVO1lBRTNDLE1BQU1HLFVBQVU7Z0JBQ2RDLFlBQVlKLE1BQU1JLFVBQVU7Z0JBQzVCQyxRQUFRTCxNQUFNSyxNQUFNO2dCQUNwQko7Z0JBQ0FDO1lBQ0Y7WUFFQSxNQUFNLEVBQUVJLFlBQVksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVosZ0JBQWdCYSxlQUFlLENBQUNMO1lBQ3RFLE1BQU1NLGFBQWFDLEtBQUtDLElBQUksQ0FBQ0osUUFBUUw7WUFFckMsT0FBT0osSUFBSU8sTUFBTSxDQUFDLEtBQUtPLElBQUksQ0FDekJyQixpRUFBcUJBLENBQUNlLGNBQWMsdUNBQXVDO2dCQUN6RUw7Z0JBQ0FDO2dCQUNBSztnQkFDQUU7WUFDRjtRQUVKO1FBRUEsSUFBSVosSUFBSUUsTUFBTSxLQUFLLFFBQVE7WUFDekJjLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJqQixJQUFJa0IsSUFBSSxHQUFHLHNCQUFzQjtZQUV2RSxNQUFNQyxnQkFBZ0IzQixvRUFBbUJBLENBQUNRLElBQUlrQixJQUFJO1lBQ2xERixRQUFRQyxHQUFHLENBQUMsMEJBQTBCRTtZQUV0QywyQ0FBMkM7WUFDM0MsTUFBTUMsVUFBVSxNQUFNdEIsZ0JBQWdCdUIsaUJBQWlCLENBQUNGO1lBRXhELE9BQU9sQixJQUFJTyxNQUFNLENBQUMsS0FBS08sSUFBSSxDQUN6QnJCLGlFQUFxQkEsQ0FBQzBCLFNBQVM7UUFFbkM7UUFFQSxxQkFBcUI7UUFDckIsT0FBT25CLElBQUlPLE1BQU0sQ0FBQyxLQUFLTyxJQUFJLENBQUNwQiwrREFBbUJBLENBQUM7SUFDbEQsRUFBRSxPQUFPMkIsT0FBWTtRQUNuQk4sUUFBUU0sS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT3JCLElBQUlPLE1BQU0sQ0FBQyxLQUFLTyxJQUFJLENBQUNuQiwwREFBY0EsQ0FBQzBCO0lBQzdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbXBhbmVsbWVudC1iYWNrZW5kLy4vcGFnZXMvYXBpL2FwcGxpY2F0aW9ucy9pbmRleC50cz9lYjZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgQXBwbGljYXRpb25SZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vLi4vbGliL2RiJztcclxuaW1wb3J0IHtcclxuICB2YWxpZGF0ZUFwcGxpY2F0aW9uLFxyXG4gIHZhbGlkYXRlUGFnaW5hdGlvbixcclxufSBmcm9tICcuLi8uLi8uLi9saWIvdmFsaWRhdGlvbic7XHJcbmltcG9ydCB7XHJcbiAgY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlLFxyXG4gIGNyZWF0ZUVycm9yUmVzcG9uc2UsXHJcbiAgaGFuZGxlQXBpRXJyb3IsXHJcbiAgcGFyc2VRdWVyeSxcclxufSBmcm9tICcuLi8uLi8uLi9saWIvdXRpbHMnO1xyXG5cclxuY29uc3QgYXBwbGljYXRpb25SZXBvID0gbmV3IEFwcGxpY2F0aW9uUmVwb3NpdG9yeSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5KHJlcS5xdWVyeSk7XHJcbiAgICAgIGNvbnN0IHsgcGFnZSwgbGltaXQgfSA9IHZhbGlkYXRlUGFnaW5hdGlvbihxdWVyeSk7XHJcblxyXG4gICAgICBjb25zdCBmaWx0ZXJzID0ge1xyXG4gICAgICAgIGRlcGFydG1lbnQ6IHF1ZXJ5LmRlcGFydG1lbnQsXHJcbiAgICAgICAgc3RhdHVzOiBxdWVyeS5zdGF0dXMsXHJcbiAgICAgICAgcGFnZSxcclxuICAgICAgICBsaW1pdCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHsgYXBwbGljYXRpb25zLCB0b3RhbCB9ID0gYXdhaXQgYXBwbGljYXRpb25SZXBvLmdldEFwcGxpY2F0aW9ucyhmaWx0ZXJzKTtcclxuICAgICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihcclxuICAgICAgICBjcmVhdGVTdWNjZXNzUmVzcG9uc2UoYXBwbGljYXRpb25zLCAnQXBwbGljYXRpb25zIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLCB7XHJcbiAgICAgICAgICBwYWdlLFxyXG4gICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgICB0b3RhbCxcclxuICAgICAgICAgIHRvdGFsUGFnZXMsXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCByZXF1ZXN0IGJvZHk6JywgcmVxLmJvZHkpOyAvLyBEZWJ1ZyBpbmNvbWluZyBib2R5XHJcblxyXG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gdmFsaWRhdGVBcHBsaWNhdGlvbihyZXEuYm9keSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0ZWQgYXBwbGljYXRpb246JywgdmFsaWRhdGVkRGF0YSk7XHJcblxyXG4gICAgICAvLyBJbnNlcnQgdGhlIHZhbGlkYXRlZCBhcHBsaWNhdGlvbiBpbnRvIERCXHJcbiAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBhcHBsaWNhdGlvblJlcG8uY3JlYXRlQXBwbGljYXRpb24odmFsaWRhdGVkRGF0YSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oXHJcbiAgICAgICAgY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlKGNyZWF0ZWQsICdBcHBsaWNhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWV0aG9kIG5vdCBhbGxvd2VkXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oY3JlYXRlRXJyb3JSZXNwb25zZSgnTWV0aG9kIG5vdCBhbGxvd2VkJykpO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIC9hcGkvYXBwbGljYXRpb25zOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbihoYW5kbGVBcGlFcnJvcihlcnJvcikpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQXBwbGljYXRpb25SZXBvc2l0b3J5IiwidmFsaWRhdGVBcHBsaWNhdGlvbiIsInZhbGlkYXRlUGFnaW5hdGlvbiIsImNyZWF0ZVN1Y2Nlc3NSZXNwb25zZSIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJoYW5kbGVBcGlFcnJvciIsInBhcnNlUXVlcnkiLCJhcHBsaWNhdGlvblJlcG8iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwicXVlcnkiLCJwYWdlIiwibGltaXQiLCJmaWx0ZXJzIiwiZGVwYXJ0bWVudCIsInN0YXR1cyIsImFwcGxpY2F0aW9ucyIsInRvdGFsIiwiZ2V0QXBwbGljYXRpb25zIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwidmFsaWRhdGVkRGF0YSIsImNyZWF0ZWQiLCJjcmVhdGVBcHBsaWNhdGlvbiIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/applications/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fapplications&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Capplications%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();